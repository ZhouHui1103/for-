# 业务流程设计工作流规范

**版本**: 1.2

| 版本 | 日期       | 修改人 | 备注 |
| :--- | :--- | :--- | :--- |
| 1.2 | YYYY-MM-DD | @SiliconLuo | 根据TASK-002，统一版本日志格式。 |
| 1.1 | (历史日期) | @SiliconLuo | 根据TASK-001，正式引入L1业务场景作为工作流的起点。 |
| 1.0 | (初始日期) | @SiliconLuo | 初始版本 |

### 零、核心理念
本规范定义了将一份高阶业务需求，通过SOP-L框架，转化为一系列可执行、可维护的结构化SOP文档的端到端标准流程。

**核心目标**：将模糊的业务需求，系统性地转化为清晰、可执行的流程框架。

### 工作流输入 (Upstream Inputs)
- **输入类型**: 非结构化的业务需求文档、会议纪要、产品思考草稿等。
- **输入示例**: `@/ADHD-Process/L2-adhd.md`
- **输入要求**: 需要蕴含可识别的核心业务流程、参与角色和业务目标。

### 工作流输出 (Downstream Outputs)
- **核心产出物**: 针对单一业务领域（如ADHD督导业务）的L1-L3全套SOP文档。
- **输出物清单**:
    - `[业务域] L1 - 业务场景.md`
    - `[业务域] L2 - 核心元数据定义.md`
    - `[业务域].json`
    - `[业务域] L2 - 流程架构.md`
    - `L3 - [流程1].md`, `L3 - [流程2].md`, ...
- **产出物位置**: `@/ADHD-Process/` (示例)

---

### 一、标准工作流概览

```mermaid
graph TD
    A[STEP 0: 撰写L1业务场景] --> B{STEP 1: 定义L2核心元数据 (MD & JSON)};
    B --> C[STEP 2: 构建L2.5流程架构];
    C --> D[STEP 3: 批量生成L3-SOP草稿];
    D --> E{STEP 4: 交付与人工完善};
    E --> F[STEP 5: L1场景闭环验证];
    F --> B;
```

---

### 二、分步工作流详解

#### **STEP 0: 撰写L1业务场景**
- **输入**: 
    - 原始业务需求文档、会议纪要或非结构化思考（如 `L2-adhd.md`）。
- **动作**:
    - 产品经理或业务分析师遵循 `业务场景规范.md`，将非结构化输入提炼成结构化的业务场景。
- **引用规范/模板**:
    - `process-protocol/业务场景/业务场景规范.md`
- **产出**:
    - 一份已确认的 `[业务域] L1 - 业务场景.md`。这份文档是后续所有步骤的“需求源头”。
- **CHECKPOINT**: 业务场景是否清晰、完整，并获得了核心干系人的共识？

---

#### **STEP 1: 定义L2核心元数据 (对象、角色、场域)**
- **前置条件**: 已产出 `L1 - 业务场景.md`。
- **输入**: 
    - `L1 - 业务场景.md`。
- **动作**:
    - 遵循 `核心元数据定义规范.md`，从L1场景中识别出所有的“对象”、“角色”、“场域”。
- **引用规范**: 
  - `元数据/核心元数据定义规范.md`
  - `元数据/JSON定义规范与模板.md`
- **引用模板**: `元数据/核心元数据定义模板.md`
- **动作**: 
    1.  基于业务需求，我会识别出核心业务实体（对象）、参与者（角色）和交互空间（场域），创建一份草稿版的 `[业务域] L2 - 核心元数据定义.md`。
    2.  在L2定义文档的基础上，我会遵循JSON规范，为您生成一份对应的 `[业务域].json` 文件。
- **产出**: 
  - 草稿版的L2对象与角色定义文档 (`.md`)
  - 草稿版的业务定义文件 (`.json`)
  - **此两份文档必须包含所有已识别元素的完整明细，不可进行任何形式的摘要或省略。**

---

#### **CHECKPOINT 1: 确认核心元数据**
- **动作**: **【暂停】** 我会向您提交草稿版的《L2-对象与角色定义》和《业务域.json》。
- **协同要求**: 请您审核这两份文档，**确保我们对业务核心元素的文本描述和结构化定义达成双重共识**。这是整个流程体系的基石，任何修改都应在此阶段完成。

---

#### **STEP 2: 构建L2.5流程架构**
- **前置条件**: 《L2-对象与角色定义》和《业务域.json》已获得您的最终确认。
- **引用规范**: 
  - `流程架构/流程架构规范.md`
  - `[业务域].json` (**核心输入**)
- **引用模板**: `流程架构/流程架构模板.md`
- **动作**: 我会将已确认的对象及其状态演变，系统性地映射为L3流程架构。此过程将**严格参考《业务域.json》文件中的定义**，确保流程与核心定义完全对齐。最终产出一份草稿版的 `[业务域] L2 - 流程架构.md`。
- **产出**: 草稿版的L2流程架构文档。

---

#### **CHECKPOINT 2: 确认流程架构**
- **动作**: **【暂停】** 我会向您提交草稿版的《L2-流程架构》文档。
- **协同要求**: 请您审核这份文档。它定义了我们将要创建的所有SOP及其核心阶段，**确保我们对“要做哪些流程”和“流程分几步”达成共识**。

---

#### **STEP 3: 批量生成L3-SOP草稿**
- **前置条件**: 《L2-流程架构》文档已获得您的最终确认。
- **引用规范**: 
  - `SOP/SOP核心规范.md`
  - `[业务域].json` (**核心输入**)
- **引用模板**: `SOP/SOP模板.md`
- **动作**: 我会根据流程架构中的每一行，并**严格参考《业务域.json》文件**，自动生成一个对应的L3-SOP文档。
    1.  **创建文件**: 创建 `L3 - [流程名称].md` 文件。
    2.  **填充元信息**: 自动从JSON文件中提取并填充`模块概述`、`角色关系`、`输入输出与关联场域`等头部信息。
    3.  **构建L4/L5框架**: 自动根据架构表中的`核心L4阶段`创建`## L4`标题。
    4.  **精准生成L6动作**: 基于L2和L3的元定义，具体的L5/L6操作步骤将按以下规则智能生成：
        - **数据读/写操作**: 对于读取输入对象、更新对象状态等数据操作，**直接生成精准的L6动作描述，并包含明确的操作逻辑**。例如：“`支撑运营`: **更新** `订单信息`的`状态`字段为固定值`待交付`。” 或 “`支撑运营`: **更新** `服务进程`的`关联订单ID`字段，其值**来源于**当前`订单信息`的`ID`字段。”
        - **协作操作**: 对于涉及场域切换、信息同步等协作操作，**直接生成精准的L6动作描述**。例如：“`支撑运营`: 在`督导小队群`中，发布新服务分配通知。”
        - **核心处理操作**: 对于需要人工执行、决策的复杂业务动作，**生成带有引导性描述的L6留白**。例如：“`督导师`: [L6动作留白 - *请补充与客户完成首次沟通，并介绍服务模式的具体话术与步骤*]”
- **产出**: 一系列结构完整、核心L6动作（精确到字段及其操作逻辑）已预置、待人工补充细节的L3-SOP草稿文件。

---

#### **STEP 4: 交付SOP清单与待办索引**
- **动作**: 我会为您提供一份清晰的交付清单。
- **产出**:
    1.  **文档清单**: 所有已生成的L2和L3文档的列表。
    2.  **待办事项索引**: 一份明确的指引，告知您需要在**哪些SOP文件**的**哪个L5活动**下，补充填写具体的L6操作步骤。

---

### 三、变更管理的黄金法则

**任何对上游文档的修改，都必须触发对下游文档的连锁更新评估，以维护体系的完整性和一致性。**

- **场景1: 修改《L2-对象与角色定义》**
  - **触发**: 如果一个对象的`状态`或`属性`发生改变。
  - **连锁反应**:
    1.  **必须**同步更新《业务域.json》文件。
    2.  **必须**基于更新后的定义，重新审视《L2-流程架构》，确认`核心L4阶段`的定义是否依然有效。
    3.  **可能**需要修改关联的`L3-SOP`文档中的L4/L5框架。
    4.  **必须**通知您此变更，并重新走相关的确认流程。

- **场景2: 修改《L2-流程架构》**
  - **触发**: 如果一个流程的`核心L4阶段`被增删或修改。
  - **连锁反应**:
    1.  **必须**对应增删或修改相关的`L3-SOP`文档及其内部的L4/L5标题。
    2.  **必须**在`待办事项索引`中更新需要您关注的部分。

**在每次互动中，我都会默认遵循此法则，确保我们的工作成果始终保持同步和逻辑自洽。** 