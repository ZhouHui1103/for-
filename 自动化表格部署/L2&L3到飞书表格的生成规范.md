# 规范: 从L2/L3业务文档到飞书多维表格的系统性生成方法

**版本**: 1.0
**日期**: 2025-09-23
**目的**: 本规范旨在提供一套标准化的流程，用于将业务分析文档（L2核心元数据定义、L3流程架构）系统性地转化为功能性的飞书多维表格数据库。

---

## 核心转换原则

1.  **对象即数据表 (Object as Table)**: L2文档中定义的每一个业务对象（如`客户信息`、`订单信息`）都直接映射为飞书多维表格中的一张独立数据表。这是整个建模过程的基石。
2.  **状态/类别即选项 (State/Category as Options)**: 对象的状态（如`待分配` -> `交付中`）和类别（如`学习型`、`工作型`）是天然的**单选/多选**字段的选项来源。
3.  **关联即链接 (Relation as Link)**: 对象的关联关系（如`订单`关联`客户`）直接转化为表格间的**关联**字段，构建起整个数据库的关系网络。
4.  **流程驱动数据校验 (Process Drives Data Validation)**: L3流程文档是用于校验和丰富数据表设计的关键。通过模拟流程，可以发现需要补充的辅助字段（如公式、汇总、查找字段）以实现流程自动化。

---

## 标准生成步骤

#### 第1步：识别核心对象，建立数据表 (Identify & Create Tables)

-   **输入**: `L2-核心元数据定义.md` -> `二、对象明细`
-   **操作**:
    1.  遍历对象明细中的每一个业务对象（`客户信息`, `产品清单`, `订单信息`等）。
    2.  为每一个对象，在飞书多维表格中创建一个同名的数据表（`客户信息表`, `产品清单表`, `订单信息表`）。

#### 第2步：定义基础字段与主字段 (Define Basic & Primary Fields)

-   **输入**: `L2-核心元数据定义.md` -> 每个对象的 `数据字段` 部分。
-   **操作**:
    1.  在对应的表格中，为数据字段列表里的每一项创建一个字段。
    2.  初步判断字段类型（文本、数字、日期等）。
    3.  选择一个最具有唯一性和代表性的字段作为该表的**主字段**（例如，`客户ID`、`产品名称`、`订单ID`）。

#### 第3步：配置状态与分类字段 (Configure Select Fields)

-   **输入**: `L2-核心元数据定义.md` -> 每个对象的 `状态` 和 `类别` 部分。
-   **操作**:
    1.  找到状态定义，创建一个**单选**字段，并将所有状态（如`待开启`, `进程中`, `已结束`）作为选项填入。
    2.  找到类别定义，判断其是单选还是多选逻辑。例如，身份属性通常是单选，需求属性可能是多选。创建对应的**单选/多选**字段，并填入选项。

#### 第44步：建立表间关联关系 (Establish Table Links)

-   **输入**: `L2-核心元数据定义.md` -> 每个对象的 `关联关系` -> `关联对象` 部分。
-   **操作**:
    1.  在当前表格中，为每一个关联对象创建一个**关联**类型的字段。
    2.  将该字段指向其关联对象对应的数据表。例如，在`订单信息表`中，创建一个名为关联客户的关联字段，并将其链接到`客户信息表`。
    3.  根据业务逻辑，设置是否允许关联多个记录。

#### 第5步：添加辅助字段（查找、汇总、公式）(Add Helper Fields)

-   **输入**: `L2-核心元数据定义.md` & `L3-流程架构.md`
-   **操作**:
    1.  **查找 (Lookup)**: 当你在`订单表`中需要直接看到`客户`的电话时，就可以在`订单表`中添加一个查找字段，从关联的客户记录中把电话号码查过来，避免跨表查看。
    2.  **汇总 (Rollup)**: L3流程中提到要看`督导小队`的已负责数量。这时，在`督导小队表`中添加一个汇总字段，用于自动计算其关联的`服务进程`记录的数量。
    3.  **公式 (Formula)**: 当需要根据已有字段计算新值时（如`剩余容量 = 总容量 - 已负责数量`），使用公式字段。

#### 第6步：流程验证与迭代 (Validate with Process)

-   **输入**: `L3-流程架构.md` -> `流程明细`
-   **操作**:
    1.  通读L3的每一个流程步骤，思考：我当前的数据表结构，能否支持这个操作的顺畅完成？
    2.  **示例**: L3中提到支撑运营根据小队容量进行分配，这就验证了我们在`督导小队表`中创建`总容量`、`已负责数量`和`剩余容量`字段的必要性。如果缺少这些字段，流程就无法高效执行。
    3.  根据流程模拟的结果，返回前面的步骤，对字段进行增、删、改，直到数据结构能完全支撑业务流程的运转。

